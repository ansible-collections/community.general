- name: register pyOpenSSL version
  command: '{{ ansible_python_interpreter }} -c ''import OpenSSL; print(OpenSSL.__version__)'''
  register: pyopenssl_version
- name: Install requests<2.20 (CentOS/RHEL 6)
  pip:
    name: requests<2.20
  register: result
  until: result is success
  when: ansible_distribution_file_variety|default() == 'RedHat' and ansible_distribution_major_version is version('6', '<=')
- name: Install python-consul
  pip:
    name: python-consul
  register: result
  until: result is success
- name: Generate privatekey
  community.crypto.openssl_privatekey:
    path: '{{ output_dir }}/privatekey.pem'
