---
# Copyright (c) Ansible Project
# GNU General Public License v3.0+ (see LICENSES/GPL-3.0-or-later.txt or https://www.gnu.org/licenses/gpl-3.0.txt)
# SPDX-License-Identifier: GPL-3.0-or-later

- name: Removing first physical volume
  community.general.lvm_pv:
    device: "{{ loop_device_01.stdout }}"
    state: absent
    force: true
  register: remove_first_result

- name: Removing second physical volume
  community.general.lvm_pv:
    device: "{{ loop_device_02.stdout }}"
    state: absent
    force: true
  register: remove_second_result

- name: Asserting physical volumes were removed
  ansible.builtin.assert:
    that:
      - remove_first_result.changed == true
      - "'removed' in remove_first_result.msg"
      - remove_second_result.changed == true
      - "'removed' in remove_second_result.msg"
