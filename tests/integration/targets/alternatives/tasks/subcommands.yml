- name: Try with subcommands
  alternatives:
    name: dummymain
    path: '/usr/bin/dummy1'
    link: '/usr/bin/dummymain'
    subcommands:
      - name: dummysubcmd
        path: '/usr/bin/dummy2'
        link: '/usr/bin/dummysubcmd'
  register: alternative

- name: Check expected command was executed
  assert:
    that:
      - 'alternative is changed'

- name: Execute the current dummymain command
  command: dummymain
  register: cmd

- name: Ensure that the expected command was executed
  assert:
    that:
      - cmd.stdout == "dummy1"

- name: Execute the current dummysubcmd command
  command: dummysubcmd
  register: cmd

- name: Ensure that the expected command was executed
  assert:
    that:
      - cmd.stdout == "dummy2"