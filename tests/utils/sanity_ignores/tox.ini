[tox]
isolated_build = True
envlist = sanity-ansible{29,210,dev}
skipdist = true

[base]
deps =
  ansible29: ansible>=2.9,<2.10
  ansible210: ansible>=2.10,<2.11
  ansibledev: https://github.com/ansible/ansible/archive/devel.tar.gz

[testenv:sanity-ansible{29,210,dev}]
passenv = PWD HOME
skip_install = true
deps = {[base]deps}
allowlist_externals = tmp-ansible-test
changedir = {env:CHDIR}
commands =
  tmp-ansible-test sanity --docker default -v {posargs}

[testenv:units-ansible{29,210,dev}]
passenv = PWD HOME
skip_install = true
deps = {[base]deps}
allowlist_externals = tmp-ansible-test
changedir = {env:CHDIR}
commands =
  tmp-ansible-test units --docker default -v {posargs}

